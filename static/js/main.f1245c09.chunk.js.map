{"version":3,"sources":["components/twemoji.js","components/header.js","components/tableCount.js","components/googlesheets/form.js","components/googlesheets/mylocation.js","images/bean.svg","images/hub.svg","components/map.js","images/qr.svg","App.js","index.js"],"names":["Twemoji","emoji","dangerouslySetInnerHTML","__html","twemoji","parse","folder","ext","memo","Header","Component","this","props","rowCountProp","id","AppBar","position","Toolbar","Typography","variant","className","GoogleSpreadsheet","require","doc","OpenStreetMapProvider","process","NameForm","state","value","alimento","isLoading","handleChange","bind","handleSubmit","event","setState","target","self","a","useServiceAccountAuth","client_email","private_key","loadInfo","sheet","sheetsByIndex","row","Roaster","URL","City","DateISO","Date","toISOString","addRow","preventDefault","CircularProgress","onSubmit","type","placeholder","onChange","nextProps","location","loadCells","getCell","saveUpdatedCells","getRows","Coordinates","JSON","stringify","result","console","log","window","reload","onClick","TimeAgo","addDefaultLocale","pt","timeAgo","myIcon","L","Icon","iconUrl","coffeeBean","iconSize","Point","hubIcon","hub","CoffeeMap","dataMaps","center","screensizeZoom","innerWidth","MapContainer","style","height","width","zoom","maxZoom","attributionControl","TileLayer","url","attribution","AttributionControl","prefix","spiderfyDistanceMultiplier","showCoverageOnHover","maxClusterRadius","dataMapsProp","filter","x","map","dataItem","k","dateMarked","precisandoMsg","CurrentIcon","mapCoords","googleDirection","format","now","getTime","Marker","eventHandlers","click","e","icon","Popup","href","rel","ReactGA","initialize","pageview","pathname","search","provider","App","dataHeader","label","rowCount","setTipoAlimento","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","rows","length","forEach","needsUpdates","index","city","setTimeout","query","replace","providerResult","latlon","y","save","Grid","container","spacing","item","xs","sm","Paper","checked","title","src","alt","qr","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f1245c09.chunk.js","sourcesContent":["import React, { memo } from 'react'\nimport twemoji from 'twemoji'\n\n// Using the official https://github.com/twitter/twemoji from Twitter\n// With an excellent example from https://gist.github.com/chibicode/fe195d792270910226c928b69a468206\n\nconst Twemoji = ({ emoji }) => (\n    <span\n        dangerouslySetInnerHTML={{\n            __html: twemoji.parse(emoji, {\n                folder: 'svg',\n                ext: '.svg'\n            })\n        }}\n    />\n)\n\nexport default memo(Twemoji)","import React, { Component } from 'react';\nimport Twemoji from './twemoji';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n// import Button from '@material-ui/core/Button';\n// import IconButton from '@material-ui/core/IconButton';\n// import github_mark from '../images/github_mark.png';\nimport TableCount from './tableCount';\n\nclass Header extends Component {\n\n    render() {\n\n        const { rowCountProp } = this.props;\n\n        return (\n            <div id=\"header\">\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <Typography variant=\"h6\" id=\"logo\">\n                            <Twemoji emoji=\"☕\" /> MAPA da FOME <span className=\"beta\">(beta)</span> \n                        </Typography>\n                        {/* <TableCount rowCountProp={rowCountProp} /> */}\n                        {/* <a href=\"https://docs.google.com/spreadsheets/d/1u7jiqY1qM0jYWugn1dFiW3plQrvWysJqm8xXhO35zuU/edit?usp=sharing\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Button\n                                variant=\"contained\"\n                                size=\"small\">\n                                Add<span id=\"RoasterButtonMobile\">&nbsp;Roaster</span>\n                            </Button>\n                        </a>\n                        <a href=\"https://github.com/hdehal/coffee-maps\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <IconButton\n                                className=\"GitHub\"\n                                variant=\"outlined\"\n                                size=\"small\">\n                                <img className=\"GitHub\" src={github_mark} alt=\"Hosted on GitHub\" />\n                            </IconButton>\n                        </a> */}\n                    </Toolbar>\n                </AppBar>\n            </div>\n        );\n    }\n}\n\nexport default Header;\n","import React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nclass TableCount extends Component {\n    render() {\n        return (\n            <Typography className=\"TableCount\">\n                TOTAL: {this.props.rowCountProp}\n            </Typography>\n        );\n    }\n}\n\nexport default TableCount;","import React, { Component } from 'react';\r\n\r\nimport { \r\n  OpenStreetMapProvider,\r\n  // BingProvider \r\n} from 'leaflet-geosearch';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\r\n\r\nconst provider = new OpenStreetMapProvider();\r\n\r\n// = new BingProvider({\r\n//   params: {\r\n//     key: process.env.REACT_APP_BING_MAPS_API_KEY\r\n//   },\r\n// });\r\n//\r\n\r\n// Google Sheets Document ID -- PROD\r\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\r\n\r\nclass NameForm extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {value: '', alimento: props.alimento, isLoading:false};\r\n  \r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    //ATUALIZAR PROPS VINDAS DO PAI\r\n    static getDerivedStateFromProps(nextProps, state) {\r\n      if (state && nextProps.alimento !== state.alimento){ \r\n        state.alimento=nextProps.alimento;\r\n      }\r\n      return state;\r\n    }\r\n  \r\n    handleChange(event) {\r\n      this.setState({value: event.target.value});\r\n    }\r\n  \r\n    handleSubmit(event) {\r\n      //alert('Um endereço foi enviado: ' + this.state.value);\r\n      if(this.state.value === '') {event.preventDefault();return;}\r\n      \r\n      this.setState({isLoading: true});\r\n\r\n      (async function main(self) {\r\n        await doc.useServiceAccountAuth({\r\n            client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n            private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\r\n        });\r\n\r\n        await doc.loadInfo(); // Loads document properties and worksheets\r\n\r\n        const sheet = doc.sheetsByIndex[0];\r\n        //row = { Name: \"new name\", Value: \"new value\" };\r\n        \r\n        // Total row count\r\n        const row = { Roaster:  self.state.alimento, URL:\"\", City: self.state.value, DateISO: new Date().toISOString() };\r\n        const result = await sheet.addRow(row);\r\n        // console.log(result);\r\n       \r\n        //self.setState({isLoading: false});\r\n      })(this);\r\n      event.preventDefault();\r\n    }\r\n\r\n    \r\n  \r\n    render() {\r\n      return (\r\n        this.state.isLoading ?\r\n        <div><CircularProgress /></div>\r\n        :\r\n        <form onSubmit={this.handleSubmit}>\r\n          <label>\r\n            <input className=\"TextField\" type=\"text\" placeholder='Insira rua,bairro,cidade,estado' value={this.state.value} onChange={this.handleChange} />\r\n          </label>\r\n          <input className=\"SubmitButton\" type=\"submit\" value=\"Enviar Endereço\" />\r\n        </form>\r\n      );\r\n    }\r\n  }\r\nexport default NameForm; ","import React, { Component } from 'react';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\r\n\r\n\r\n// Google Sheets Document ID -- PROD\r\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\r\n\r\nclass NameForm extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {value: '', location: props.location, alimento: props.alimento, isLoading:props.isLoading};\r\n  \r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n    }\r\n\r\n    \r\n  componentDidMount() {\r\n      \r\n    //salvar acesso  \r\n      \r\n    (async function main(self) {\r\n      try{\r\n        await doc.useServiceAccountAuth({\r\n          client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n          private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\r\n        });\r\n    \r\n        await doc.loadInfo(); // Loads document properties and worksheets\r\n    \r\n        const sheet = doc.sheetsByIndex[1];\r\n        \r\n        await sheet.loadCells('A2');\r\n        const a1 = sheet.getCell(1, 0);\r\n        a1.value+=1;\r\n        await sheet.saveUpdatedCells();\r\n      }catch(e){\r\n        \r\n      }\r\n      \r\n    })(this);\r\n\r\n  }\r\n\r\n    //ATUALIZAR PROPS VINDAS DO PAI\r\n    static getDerivedStateFromProps(nextProps, state) {\r\n      if (state && nextProps.alimento !== state.alimento){ \r\n        state.alimento=nextProps.alimento;\r\n      }\r\n      return state;\r\n    }\r\n  \r\n    handleChange(event) {\r\n      this.setState({value: event.target.value});\r\n    }\r\n  \r\n    handleSubmit(event) { \r\n        //navigator.geolocation.getCurrentPosition(function(position) {\r\n        this.setState({isLoading: true});\r\n            (async function main(self) {\r\n                await doc.useServiceAccountAuth({\r\n                    client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n                    private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\r\n                });\r\n        \r\n                await doc.loadInfo(); // Loads document properties and worksheets\r\n        \r\n                const sheet = doc.sheetsByIndex[0];\r\n                const rows = await sheet.getRows();\r\n                // Total row count\r\n                const row = { Roaster: self.state.alimento, URL:\"\", City: \"\", Coordinates:JSON.stringify([self.props.location[0], self.props.location[1]]), DateISO: new Date().toISOString() };\r\n                \r\n                const result = await sheet.addRow(row);\r\n                console.log(result);\r\n                window.location.reload();\r\n            })(this);\r\n        //});\r\n      event.preventDefault();\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n          this.state.isLoading ?\r\n          <div><CircularProgress /></div>\r\n          :\r\n          <button className=\"SubmitButton\" onClick={this.handleSubmit}>\r\n            Marcar Minha Localização Atual\r\n          </button>\r\n        \r\n      );\r\n    }\r\n  }\r\nexport default NameForm; ","export default __webpack_public_path__ + \"static/media/bean.59d85c01.svg\";","export default __webpack_public_path__ + \"static/media/hub.c055cf20.svg\";","import React, { Component } from 'react';\nimport { MapContainer, Marker, TileLayer, Tooltip, AttributionControl, Popup } from \"react-leaflet\";\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport \"react-leaflet-markercluster/dist/styles.min.css\";\nimport coffeeBean from '../images/bean.svg';\nimport hub from '../images/hub.svg';\nimport TimeAgo from 'javascript-time-ago';\n\nimport pt from 'javascript-time-ago/locale/pt.json';\nTimeAgo.addDefaultLocale(pt);\n\nconst timeAgo = new TimeAgo();\n\n// Leaflet custom marker\nconst myIcon = new L.Icon({\n    // Coffee bean attribution -- Thanks! https://commons.wikimedia.org/wiki/File:Coffee_bean_symbol.svg\n    iconUrl: coffeeBean,\n    iconSize: new L.Point(20, 20),\n    className: 'leaflet-bean-icon',\n});\n\n\n// Leaflet custom marker\nconst hubIcon = new L.Icon({\n    // Coffee bean attribution -- Thanks! https://commons.wikimedia.org/wiki/File:Coffee_bean_symbol.svg\n    iconUrl: hub,\n    iconSize: new L.Point(30, 30),\n    className: 'leaflet-bean-icon',\n});\n\nclass CoffeeMap extends Component {\n\n    // Initial state\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            dataMaps: [],\n            center: props.location\n        }\n    }\n\n    render() {\n\n        // Render map default zoom based on mobile breakpoint\n        const isMobile = window.innerWidth < 480;\n        const screensizeZoom = isMobile ? 7.25 : 8.5*1.2;\n\n        return (\n            <div>\n                <MapContainer\n                    style={{ height: \"89vh\", width: \"100%\" }}\n                    zoom={screensizeZoom}\n                    maxZoom={20}\n                    center={this.state.center}\n                    attributionControl={false}>\n                    <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        attribution=\" &copy; <a href='http://openstreetmap.org' target='_blank' rel='noreferrer'>OpenStreetMap</a>\"\n                    />\n\n                    <AttributionControl\n                        position=\"bottomleft\"\n                        prefix={false}\n                    />\n\n                    <MarkerClusterGroup\n                        spiderfyDistanceMultiplier={1}\n                        showCoverageOnHover={false}\n                        maxClusterRadius={35}\n                    >\n                        {this.props.dataMapsProp.filter(x => { return x.Coordinates; }).map((dataItem, k) => {\n                            let { City, mapCoords, Roaster, URL, DateISO } = dataItem;\n                            let googleDirection = `https://www.google.com/maps/search/${[mapCoords[0]+','+mapCoords[1]]}`;\n                            \n                            let dateMarked;\n                            if(DateISO) dateMarked = timeAgo.format(Date.now() - (Date.now() - new Date(DateISO).getTime()) );\n                            \n                            let precisandoMsg, CurrentIcon;\n                            if(Roaster === \"Doador\"){\n                                precisandoMsg = \"Recebendo alimento para distribuir\";\n                                CurrentIcon = hubIcon;\n                            }else{\n                                precisandoMsg = `Precisando de ${Roaster}`;\n                                CurrentIcon = myIcon;\n                            }\n                            \n                            return (\n                                <Marker\n                                    eventHandlers={{\n                                        click: (e) => { \n                                            // alert(`Precisando de ${Roaster}`); \n                                            console.log(`indo para [${[mapCoords[0]+','+mapCoords[1]]}]`); \n                                            // window.open(`https://www.google.com/maps/search/${[mapCoords[0]+','+mapCoords[1]]}`) \n                                        }\n                                    }}\n                                    icon= {CurrentIcon} \n                                    key={k}\n                                    center={[mapCoords[0], mapCoords[1]]}\n                                    position={[mapCoords[0], mapCoords[1]]}\n                                >\n                                    <Popup>\n                                        <a href={googleDirection} target='_blank' rel=\"noreferrer\">Ir para o destino</a>\n                                        <br/>\n                                        {precisandoMsg}\n                                        <br/>\n                                        {dateMarked}\n                                    </Popup>\n                                    {/* <Tooltip\n                                        // direction=\"auto\"\n                                        // offset={[15, 0]}\n                                        // opacity={1}>\n                                        // <span><a href={URL}>Precisando de<br></br>{Roaster}</a></span>\n                                        // <span>{City}, BR</span>\n                                    </Tooltip> */}\n                                </Marker>);\n                        })}\n                    </MarkerClusterGroup>\n                </MapContainer>\n            </div>\n        );\n    }\n}\n\nexport default CoffeeMap;","export default __webpack_public_path__ + \"static/media/qr.20154bbf.svg\";","import React, { Component } from 'react';\nimport './App.css';\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\nimport Header from './components/header';\n\nimport NameForm from './components/googlesheets/form';\nimport MyLocationButton from './components/googlesheets/mylocation';\n\nimport CoffeeMap from './components/map.js';\n// import CoffeeTable from './components/table';\nimport ReactGA from 'react-ga';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n\nimport qr from './images/qr.svg';\n\n// Material-UI\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\n// Google Analytics\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-172868315-1');\n  ReactGA.pageview(window.location.pathname + window.location.search);\n}\n\ninitializeReactGA()\n\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\n\n// Google Sheets Document ID -- PROD\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\n\n// Google Sheets Document ID -- DEV\n// const doc = new GoogleSpreadsheet('1jQI6PstbEArW_3xDnGgPJR6_37r_KjLoa765bOgMBhk');\n\n// Provider for leaflet-geosearch plugin\nconst provider = new OpenStreetMapProvider();\n\nclass App extends Component {\n\n  // Initial state\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      dataMaps: [],\n      dataHeader: [{ label: \"Índice\" }, { label: \"Lugar\" }],\n      rowCount: '',\n      center:[-8.0671132,-34.8766719],\n      alimento:'Alimento não perecível'\n    }\n\n    this.setTipoAlimento = this.setTipoAlimento.bind(this);\n  }\n\n  setTipoAlimento(event){\n    this.setState({\n      alimento: event.target.value\n    });\n\n  }\n\n  componentDidMount() {\n\n    // Google Sheets API\n    // Based on https://github.com/theoephraim/node-google-spreadsheet\n\n    var self = this;\n\n    //current location    \n    navigator.geolocation.getCurrentPosition(function(position) {\n      self.setState({center: [position.coords.latitude, position.coords.longitude]}) \n    });\n\n    (async function main() {\n      // Use service account creds\n      await doc.useServiceAccountAuth({\n        client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\n        private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\n      });\n\n      await doc.loadInfo(); // Loads document properties and worksheets\n\n      const sheet = doc.sheetsByIndex[0];\n      const rows = await sheet.getRows();\n      // Total row count\n      self.setState({ rowCount: rows.length });\n\n      rows.forEach((x) => { if (x.Coordinates) { x.mapCoords = JSON.parse(x.Coordinates); } });\n\n      self.setState({ dataMaps: rows });\n\n      var needsUpdates = rows.filter((x) => { return !x.Coordinates; });\n      if(needsUpdates.length === 0) console.log(\"nao precisa atualizar\");\n      if (needsUpdates && needsUpdates.length > 0) {\n          for (let index in needsUpdates) {\n            // if(needsUpdates[index]._rawData.length===0) needsUpdates[index].delete(); //se deixar rows vazias na planilha\n              let city = needsUpdates[index].City;\n              setTimeout(() => \n                  {\n                      (async function main() {\n                          try{\n                              let providerResult = await provider.search({ query: city.replace('-',\",\") + ', Brazil' });\n                      \n                              if(providerResult.length !== 0 ){\n                                  // throw new Error(\"endereco-nao-encontrado\");\n                      \n                                  console.log(providerResult);\n                                  let latlon = [providerResult[0].y, providerResult[0].x];\n                                  needsUpdates[index].Coordinates = JSON.stringify(latlon); // Convert obj to string\n                                  //needsUpdates[index].mapCoords = latlon;\n                                  await needsUpdates[index].save(); // Save to remote Google Sheet\n                              }\n                          }catch(e){\n                              console.log(\"ERRO\");\n                              console.log(e);\n                          }\n                      })();\n                  \n                  },1300                        \n              );\n              \n          }\n        self.setState({ dataMaps: rows });\n      }\n\n      // Loading message \n      self.setState({ isLoading: false })\n\n    })();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header rowCountProp={this.state.rowCount} />\n        {/* <NameForm/>\n        <MyLocationButton location={this.state.center}/> */}\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={8}>\n            <Paper id=\"CoffeeMap\" className=\"fadeIn\">\n              {this.state.isLoading\n                ? <div className=\"flexLoading\"><div className=\"loading\">Carregando...</div></div>\n                : <CoffeeMap dataMapsProp={this.state.dataMaps} location={this.state.center}/>\n              }\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={4}>\n            <Paper id=\"CoffeeTable\">\n              {this.state.isLoading\n                ? <div className=\"flexLoading\"><div className=\"loading\"><CircularProgress /></div></div>\n                // : <CoffeeTable dataMapsProp={this.state.dataMaps} dataHeaderProp={this.state.dataHeader} />\n              : <div>\n                Mapeados: {this.state.rowCount}<br></br>Insira o endereço de quem está sem dinheiro e com fome e o selecione tipo de alimento:\n        {/* RADIO BUTTON */}\n        <ul>\n          <li>\n            <label>\n              <input\n                type=\"radio\"\n                value=\"Alimento não perecível\"\n                checked={this.state.alimento === \"Alimento não perecível\"}\n                onChange={this.setTipoAlimento}\n              />\n              Alimento não perecível\n            </label>\n          </li>\n          \n          <li>\n            <label>\n              <input\n                type=\"radio\"\n                value=\"Alimento pronto\"\n                checked={this.state.alimento === \"Alimento pronto\"}\n                onChange={this.setTipoAlimento}\n              />\n              Alimento pronto\n            </label>\n          </li>\n\n          \n          <li>\n            <label>\n              <input\n                type=\"radio\"\n                value=\"Doador\"\n                checked={this.state.alimento === \"Doador\"}\n                onChange={this.setTipoAlimento}\n              />\n              Recebo para doar\n            </label>\n          </li>\n        </ul>\n        {/* FIM RADIO BUTTON */}\n                <MyLocationButton location={this.state.center}  alimento={this.state.alimento}/> \n                <NameForm alimento={this.state.alimento}/> \n                <a className=\"wpbtn\" title=\"share to whatsapp\" href=\"whatsapp://send?text=Para marcar no mapa e alimentar quem tem fome, achei esse site: https://rslgp.github.io/mapafome\"> <img className=\"wp\" src=\"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg\" alt=\"\"/>\n                Compartilhar no Whatsapp</a>\n                <a target='_blank' rel=\"noreferrer\" href=\"https://t.me/share?url=https%3A%2F%2Frslgp.github.io%2Fmapafome&amp;text=Para%20marcar%20no%20mapa%20e%20alimentar%20quem%20tem%20fome%2C%20achei%20esse%20site%3A\" className=\"tgme_widget_share_btn\"><img className=\"telegram\" src=\"https://telegram.org/img/WidgetButton_LogoSmall.png\" alt=\"\"></img></a>\n\n                <img src={qr} alt=\"\"/>\n\n              </div>\n               \n              \n              }\n            </Paper>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}