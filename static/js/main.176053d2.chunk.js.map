{"version":3,"sources":["components/twemoji.js","components/tableCount.js","components/header.js","components/form.js","components/mylocation.js","images/bean.svg","components/map.js","components/table.js","App.js","index.js"],"names":["Twemoji","emoji","dangerouslySetInnerHTML","__html","twemoji","parse","folder","ext","memo","TableCount","Typography","className","this","props","rowCountProp","Component","Header","id","AppBar","position","Toolbar","variant","GoogleSpreadsheet","require","provider","OpenStreetMapProvider","doc","process","NameForm","state","value","handleChange","bind","handleSubmit","event","setState","target","alert","self","a","useServiceAccountAuth","client_email","private_key","loadInfo","sheet","sheetsByIndex","console","log","result","getRows","rows","row","Roaster","length","URL","City","addRow","forEach","x","Coordinates","mapCoords","JSON","needsUpdates","filter","index","city","search","query","replace","providerResult","latlon","y","stringify","save","window","location","reload","preventDefault","onSubmit","type","onChange","onClick","myIcon","L","Icon","iconUrl","coffeeBean","iconSize","Point","CoffeeMap","dataMaps","center","screensizeZoom","innerWidth","MapContainer","style","height","width","zoom","maxZoom","attributionControl","TileLayer","url","attribution","AttributionControl","prefix","spiderfyDistanceMultiplier","showCoverageOnHover","maxClusterRadius","dataMapsProp","map","dataItem","k","Marker","eventHandlers","click","e","open","icon","Tooltip","direction","offset","opacity","href","CoffeeTable","data","order","newTab","column","sortedList","newOrder","sortValue","v1","v2","toLowerCase","localeCompare","sort","b","TableContainer","component","Paper","Table","size","stickyHeader","aria-label","TableHead","TableRow","dataHeaderProp","val","TableCell","label","TableSortLabel","TableBody","hover","scope","rel","align","ReactGA","initialize","pageview","pathname","App","isLoading","dataHeader","rowCount","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","Grid","container","spacing","item","xs","sm","CircularProgress","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.176053d2.chunk.js","sourcesContent":["import React, { memo } from 'react'\nimport twemoji from 'twemoji'\n\n// Using the official https://github.com/twitter/twemoji from Twitter\n// With an excellent example from https://gist.github.com/chibicode/fe195d792270910226c928b69a468206\n\nconst Twemoji = ({ emoji }) => (\n    <span\n        dangerouslySetInnerHTML={{\n            __html: twemoji.parse(emoji, {\n                folder: 'svg',\n                ext: '.svg'\n            })\n        }}\n    />\n)\n\nexport default memo(Twemoji)","import React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nclass TableCount extends Component {\n    render() {\n        return (\n            <Typography className=\"TableCount\">\n                TOTAL: {this.props.rowCountProp}\n            </Typography>\n        );\n    }\n}\n\nexport default TableCount;","import React, { Component } from 'react';\nimport Twemoji from './twemoji';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport IconButton from '@material-ui/core/IconButton';\nimport TableCount from './tableCount';\nimport github_mark from '../images/github_mark.png';\n\nclass Header extends Component {\n\n    render() {\n\n        const { rowCountProp } = this.props;\n\n        return (\n            <div id=\"header\">\n                <AppBar position=\"static\">\n                    <Toolbar>\n                        <Typography variant=\"h6\" id=\"logo\">\n                            <Twemoji emoji=\"☕\" /> MAPA FOME\n                        </Typography>\n                        <TableCount rowCountProp={rowCountProp} />\n                        {/* <a href=\"https://docs.google.com/spreadsheets/d/1u7jiqY1qM0jYWugn1dFiW3plQrvWysJqm8xXhO35zuU/edit?usp=sharing\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <Button\n                                variant=\"contained\"\n                                size=\"small\">\n                                Add<span id=\"RoasterButtonMobile\">&nbsp;Roaster</span>\n                            </Button>\n                        </a>\n                        <a href=\"https://github.com/hdehal/coffee-maps\" target=\"_blank\" rel=\"noopener noreferrer\">\n                            <IconButton\n                                className=\"GitHub\"\n                                variant=\"outlined\"\n                                size=\"small\">\n                                <img className=\"GitHub\" src={github_mark} alt=\"Hosted on GitHub\" />\n                            </IconButton>\n                        </a> */}\n                    </Toolbar>\n                </AppBar>\n            </div>\n        );\n    }\n}\n\nexport default Header;\n","import React, { Component } from 'react';\r\n\r\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\r\n\r\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\r\n\r\nconst provider = new OpenStreetMapProvider();\r\n\r\n// Google Sheets Document ID -- PROD\r\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\r\n\r\nclass NameForm extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {value: ''};\r\n  \r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n  \r\n    handleChange(event) {\r\n      this.setState({value: event.target.value});\r\n    }\r\n  \r\n    handleSubmit(event) {\r\n      alert('Um endereço foi enviado: ' + this.state.value);\r\n      (async function main(self) {\r\n        await doc.useServiceAccountAuth({\r\n            client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n            private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\r\n        });\r\n\r\n        await doc.loadInfo(); // Loads document properties and worksheets\r\n\r\n        const sheet = doc.sheetsByIndex[0];\r\n        //row = { Name: \"new name\", Value: \"new value\" };\r\n        console.log(result);\r\n        const rows = await sheet.getRows();\r\n        // Total row count\r\n        const row = { Roaster:  rows.length, URL:\"\", City: self.state.value };\r\n        const result = await sheet.addRow(row);\r\n       \r\n\r\n        rows.forEach((x) => { if (x.Coordinates) { x.mapCoords = JSON.parse(x.Coordinates); } });\r\n\r\n        var needsUpdates = rows.filter((x) => { return !x.Coordinates; });\r\n\r\n        if (needsUpdates && needsUpdates.length > 0) {\r\n            for (let index in needsUpdates) {\r\n            let city = needsUpdates[index].City;\r\n                console.log(city);\r\n                try {\r\n                    let providerResult = await provider.search({ query: city.replace('-',\",\") + ', Brazil' });\r\n                    console.log(providerResult);\r\n                    let latlon = [providerResult[0].y, providerResult[0].x];\r\n                    needsUpdates[index].Coordinates = JSON.stringify(latlon); // Convert obj to string\r\n                    needsUpdates[index].mapCoords = latlon;\r\n                    await needsUpdates[index].save(); // Save to remote Google Sheet\r\n                    \r\n                    window.location.reload();\r\n                }\r\n                catch (e) {\r\n                    console.log(e);\r\n                }\r\n            }\r\n        }\r\n    })(this);\r\n      event.preventDefault();\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <form onSubmit={this.handleSubmit}>\r\n          <label>\r\n            Endereço:\r\n            <input type=\"text\" value={this.state.value} onChange={this.handleChange} />\r\n          </label>\r\n          <input type=\"submit\" value=\"Enviar\" />\r\n        </form>\r\n      );\r\n    }\r\n  }\r\nexport default NameForm; ","import React, { Component } from 'react';\r\n\r\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\r\n\r\n\r\n// Google Sheets Document ID -- PROD\r\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\r\n\r\nclass NameForm extends Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {value: '', location:props.location};\r\n  \r\n      this.handleChange = this.handleChange.bind(this);\r\n      this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n  \r\n    handleChange(event) {\r\n      this.setState({value: event.target.value});\r\n    }\r\n  \r\n    handleSubmit(event) { \r\n        //navigator.geolocation.getCurrentPosition(function(position) {\r\n            \r\n            (async function main(self) {\r\n                await doc.useServiceAccountAuth({\r\n                    client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\r\n                    private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\r\n                });\r\n        \r\n                await doc.loadInfo(); // Loads document properties and worksheets\r\n        \r\n                const sheet = doc.sheetsByIndex[0];\r\n                const rows = await sheet.getRows();\r\n                // Total row count\r\n                const row = { Roaster: rows.length, URL:\"\", City: \"\", Coordinates:JSON.stringify([self.props.location[0], self.props.location[1]]) };\r\n                \r\n                const result = await sheet.addRow(row);\r\n                console.log(result);\r\n                window.location.reload();\r\n            })(this);\r\n        //});\r\n      event.preventDefault();\r\n    }\r\n  \r\n    render() {\r\n      return (\r\n        <button onClick={this.handleSubmit}>\r\n          Marcar Minha Localização\r\n        </button>\r\n      );\r\n    }\r\n  }\r\nexport default NameForm; ","export default __webpack_public_path__ + \"static/media/bean.f4ec17ff.svg\";","import React, { Component } from 'react';\nimport { MapContainer, Marker, TileLayer, Tooltip, AttributionControl } from \"react-leaflet\";\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport \"react-leaflet-markercluster/dist/styles.min.css\";\nimport coffeeBean from '../images/bean.svg'\n\n// Leaflet custom marker\nconst myIcon = new L.Icon({\n    // Coffee bean attribution -- Thanks! https://commons.wikimedia.org/wiki/File:Coffee_bean_symbol.svg\n    iconUrl: coffeeBean,\n    iconSize: new L.Point(25, 25),\n    className: 'leaflet-bean-icon',\n});\n\nclass CoffeeMap extends Component {\n\n    // Initial state\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            dataMaps: [],\n            center: props.location\n        }\n    }\n\n    render() {\n\n        // Render map default zoom based on mobile breakpoint\n        const isMobile = window.innerWidth < 480;\n        const screensizeZoom = isMobile ? 7.25 : 8.5*1.2;\n\n        return (\n            <div>\n                <MapContainer\n                    style={{ height: \"89vh\", width: \"100%\" }}\n                    zoom={screensizeZoom}\n                    maxZoom={20}\n                    center={this.state.center}\n                    attributionControl={false}>\n                    <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n                        attribution=\" &copy; <a href='http://openstreetmap.org' target='_blank'>OpenStreetMap</a>\"\n                    />\n\n                    <AttributionControl\n                        position=\"bottomleft\"\n                        prefix={false}\n                    />\n\n                    <MarkerClusterGroup\n                        spiderfyDistanceMultiplier={1}\n                        showCoverageOnHover={false}\n                        maxClusterRadius={35}\n                    >\n                        {this.props.dataMapsProp.filter(x => { return x.Coordinates; }).map((dataItem, k) => {\n                            let { City, mapCoords, Roaster, URL } = dataItem;\n                            return (\n                                <Marker\n                                    eventHandlers={{\n                                        click: (e) => { window.open(URL) }\n                                    }}\n                                    icon={myIcon}\n                                    key={k}\n                                    center={[mapCoords[0], mapCoords[1]]}\n                                    position={[mapCoords[0], mapCoords[1]]}\n                                >\n                                    <Tooltip\n                                        direction=\"auto\"\n                                        offset={[15, 0]}\n                                        opacity={1}>\n                                        <span><a href={URL}>{Roaster}</a></span>\n                                        <span>{City}, BR</span>\n                                    </Tooltip>\n                                </Marker>);\n                        })}\n                    </MarkerClusterGroup>\n                </MapContainer>\n            </div>\n        );\n    }\n}\n\nexport default CoffeeMap;","import React, { Component } from 'react';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Paper from '@material-ui/core/Paper';\n\nclass CoffeeTable extends Component {\n\n  constructor(props) {\n    super(props);\n    this.newTab = this.newTab.bind(this);\n  }\n\n  // Prevent onClick event bubbling in nested components from opening multiple new tabs\n  newTab(e, url) {\n    e.preventDefault();\n    window.open(url);\n  }\n\n  // Move props to state so table can sort on state\n  state = {\n    data: [...this.props.dataMapsProp],\n    order: \"desc\"\n  }\n\n  // Table sorting\n  sort(column) {\n    const sortedList = [...this.props.dataMapsProp];\n    const newOrder = this.state.order === \"asc\" ? \"desc\" : \"asc\";\n    const sortValue = (v1, v2) => {\n      if (column === \"city\") return v1.id - v2.id;\n      return (v1[column] ?? \"\")\n        .toLowerCase()\n        .localeCompare((v2[column] ?? \"\").toLowerCase());\n    };\n    if (newOrder === \"desc\") {\n      sortedList.sort((a, b) => sortValue(a, b));\n    } else {\n      sortedList.sort((a, b) => sortValue(b, a));\n    }\n    this.setState({ data: sortedList, order: newOrder, column: column });\n  }\n\n  render() {\n\n    return (\n      <TableContainer component={Paper}>\n        <Table size=\"small\" stickyHeader aria-label=\"Coffee Table\">\n          <TableHead>\n            <TableRow>\n              {this.props.dataHeaderProp && this.props.dataHeaderProp.map((val) => (\n                <TableCell onClick={() => this.sort(val.label)}>\n                  <TableSortLabel\n                    // Who says UX isn't fun?\n                    // https://ux.stackexchange.com/questions/37564/use-up-or-down-arrow-to-represent-sort-ascending-at-table-header\n                    direction={this.state.order === \"desc\" ? \"asc\" : \"desc\"}>\n                    {val.label}\n                  </TableSortLabel>\n                </TableCell>\n              ))}\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {this.state.data.map((row, index) => (\n              <TableRow onClick={e => this.newTab(e, row.URL, \"_blank\")} key={row.Roaster} hover>\n                <TableCell component=\"th\" scope=\"row\">\n                  <a href={row.URL} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {row.Roaster}\n                  </a>\n                </TableCell>\n                <TableCell align=\"right\">{row.City}, CA</TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    );\n  }\n}\n\nexport default CoffeeTable;","import React, { Component } from 'react';\nimport './App.css';\nimport { OpenStreetMapProvider } from 'leaflet-geosearch';\nimport Header from './components/header';\nimport NameForm from './components/form';\nimport MyLocationButton from './components/mylocation';\nimport CoffeeMap from './components/map.js';\nimport CoffeeTable from './components/table';\nimport ReactGA from 'react-ga';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n// Material-UI\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\n\n// Google Analytics\nfunction initializeReactGA() {\n  ReactGA.initialize('UA-159568942-2');\n  ReactGA.pageview(window.location.pathname + window.location.search);\n}\n\ninitializeReactGA()\n\nconst { GoogleSpreadsheet } = require('google-spreadsheet');\n\n// Google Sheets Document ID -- PROD\nconst doc = new GoogleSpreadsheet(process.env.REACT_APP_GOOGLESHEETID);\n\n// Google Sheets Document ID -- DEV\n// const doc = new GoogleSpreadsheet('1jQI6PstbEArW_3xDnGgPJR6_37r_KjLoa765bOgMBhk');\n\n// Provider for leaflet-geosearch plugin\nconst provider = new OpenStreetMapProvider();\n\nclass App extends Component {\n\n  // Initial state\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true,\n      dataMaps: [],\n      dataHeader: [{ label: \"Índice\" }, { label: \"Lugar\" }],\n      rowCount: '',\n      center:[-7.4568727,-36.6414038]\n    }\n  }\n\n  componentDidMount() {\n\n    // Google Sheets API\n    // Based on https://github.com/theoephraim/node-google-spreadsheet\n\n    var self = this;\n\n    //current location    \n    navigator.geolocation.getCurrentPosition(function(position) {\n      self.setState({center: [position.coords.latitude, position.coords.longitude]}) \n    });\n\n    (async function main() {\n      // Use service account creds\n      await doc.useServiceAccountAuth({\n        client_email: process.env.REACT_APP_GOOGLE_SERVICE_ACCOUNT_EMAIL,\n        private_key: process.env.REACT_APP_GOOGLE_PRIVATE_KEY,\n      });\n\n      await doc.loadInfo(); // Loads document properties and worksheets\n\n      const sheet = doc.sheetsByIndex[0];\n      const rows = await sheet.getRows();\n      // Total row count\n      self.setState({ rowCount: rows.length });\n\n      rows.forEach((x) => { if (x.Coordinates) { x.mapCoords = JSON.parse(x.Coordinates); } });\n\n      self.setState({ dataMaps: rows });\n\n      var needsUpdates = rows.filter((x) => { return !x.Coordinates; });\n\n      if (needsUpdates && needsUpdates.length > 0) {\n        for (let index in needsUpdates) {\n          let city = needsUpdates[index].City;\n\n          try {\n            console.log(city);\n            let providerResult = await provider.search({ query: city.replace('-',\",\") + ', Brazil' });\n            let latlon = [providerResult[0].y, providerResult[0].x];\n            needsUpdates[index].Coordinates = JSON.stringify(latlon); // Convert obj to string\n            needsUpdates[index].mapCoords = latlon;\n            await needsUpdates[index].save(); // Save to remote Google Sheet\n          }\n          catch (e) {\n            console.log(e);\n          }\n        }\n\n        self.setState({ dataMaps: rows });\n      }\n\n      // Loading message \n      self.setState({ isLoading: false })\n\n    })();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header rowCountProp={this.state.rowCount} />\n        <NameForm/>\n        <MyLocationButton location={this.state.center}/>\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={8}>\n            <Paper id=\"CoffeeMap\" className=\"fadeIn\">\n              {this.state.isLoading\n                ? <div className=\"flexLoading\"><div className=\"loading\">Brewing...</div></div>\n                : <CoffeeMap dataMapsProp={this.state.dataMaps} location={this.state.center}/>\n              }\n            </Paper>\n          </Grid>\n          <Grid item xs={12} sm={4}>\n            <Paper id=\"CoffeeTable\">\n              {this.state.isLoading\n                ? <div className=\"flexLoading\"><div className=\"loading\"><CircularProgress /></div></div>\n                : <CoffeeTable dataMapsProp={this.state.dataMaps} dataHeaderProp={this.state.dataHeader} />\n              }\n            </Paper>\n          </Grid>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}